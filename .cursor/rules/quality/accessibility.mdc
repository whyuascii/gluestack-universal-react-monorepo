---
description: Accessibility (a11y) best practices for inclusive applications
globs:
  - 'packages/ui/**/*.tsx'
  - 'packages/components/**/*.tsx'
  - 'apps/web/**/*.tsx'
  - 'apps/mobile/**/*.tsx'
alwaysApply: false
priority: medium
---

# Accessibility (a11y)

## Objective
Build applications that are usable by everyone, including users with disabilities.

## Context
- React Native accessibility props
- jsx-a11y ESLint plugin for web
- WCAG 2.1 AA compliance target
- Screen reader support

## Rules

### Semantic Elements

Use proper semantic structure:

```tsx
// ✅ Good - Semantic structure (Web)
<main>
  <header>
    <nav aria-label="Main navigation">
      <ul>
        <li><Link href="/">Home</Link></li>
        <li><Link href="/about">About</Link></li>
      </ul>
    </nav>
  </header>

  <article>
    <h1>Page Title</h1>
    <section aria-labelledby="section-title">
      <h2 id="section-title">Section</h2>
      <p>Content...</p>
    </section>
  </article>
</main>

// ❌ Avoid - Non-semantic structure
<div className="header">
  <div className="nav">
    <div onClick={() => navigate("/")}>Home</div>
  </div>
</div>
```

### Accessible Labels

Provide labels for interactive elements:

```tsx
// ✅ Good - Accessible labels
<Input
  accessibilityLabel="Email address"
  accessibilityHint="Enter your email to sign in"
  placeholder="Email"
  keyboardType="email-address"
/>

<Button
  accessibilityLabel="Submit form"
  accessibilityRole="button"
  onPress={handleSubmit}
>
  <ButtonText>Submit</ButtonText>
</Button>

// ✅ Good - Icon button with label
<Pressable
  accessibilityLabel="Close dialog"
  accessibilityRole="button"
  onPress={onClose}
>
  <Icon name="close" />
</Pressable>

// ❌ Avoid - Missing labels
<Pressable onPress={onClose}>
  <Icon name="close" />
</Pressable>
```

### Focus Management

Manage focus for keyboard users:

```tsx
// ✅ Good - Focus management
import { useRef, useEffect } from "react";

export function Modal({ isOpen, onClose, children }) {
  const closeButtonRef = useRef<View>(null);

  useEffect(() => {
    if (isOpen) {
      // Focus first interactive element when modal opens
      closeButtonRef.current?.focus();
    }
  }, [isOpen]);

  return (
    <View
      accessibilityRole="dialog"
      accessibilityModal={true}
      accessibilityLabel="Dialog"
    >
      <Pressable
        ref={closeButtonRef}
        accessibilityLabel="Close"
        onPress={onClose}
      >
        <Icon name="close" />
      </Pressable>
      {children}
    </View>
  );
}
```

### Color Contrast

Ensure sufficient color contrast:

```tsx
// ✅ Good - Sufficient contrast (4.5:1 for text)
<Text className="text-gray-900 bg-white">
  High contrast text
</Text>

<Text className="text-gray-700 bg-gray-100">
  Acceptable contrast for larger text
</Text>

// ❌ Avoid - Low contrast
<Text className="text-gray-400 bg-gray-200">
  Hard to read text
</Text>
```

### Touch Targets

Ensure adequate touch target size:

```tsx
// ✅ Good - Minimum 44x44 touch target
<Pressable
  className="min-h-[44px] min-w-[44px] p-3"
  accessibilityRole="button"
  onPress={handlePress}
>
  <Icon name="menu" size={24} />
</Pressable>

// ❌ Avoid - Too small touch target
<Pressable className="p-1" onPress={handlePress}>
  <Icon name="menu" size={16} />
</Pressable>
```

### Form Accessibility

Make forms accessible:

```tsx
// ✅ Good - Accessible form
<VStack space="md">
  <FormControl isInvalid={!!errors.email}>
    <FormControlLabel>
      <FormControlLabelText>Email</FormControlLabelText>
    </FormControlLabel>
    <Input
      accessibilityLabel="Email"
      accessibilityHint="Enter your email address"
      aria-describedby="email-error"
    >
      <InputField
        placeholder="you@example.com"
        keyboardType="email-address"
        autoComplete="email"
      />
    </Input>
    <FormControlError>
      <FormControlErrorText id="email-error">
        {errors.email?.message}
      </FormControlErrorText>
    </FormControlError>
  </FormControl>
</VStack>
```

### Loading States

Announce loading states:

```tsx
// ✅ Good - Loading announcement
<View
  accessibilityRole="progressbar"
  accessibilityLabel={isLoading ? "Loading content" : "Content loaded"}
  accessibilityLiveRegion="polite"
>
  {isLoading ? (
    <ActivityIndicator accessibilityLabel="Loading" />
  ) : (
    <Content />
  )}
</View>

// ✅ Good - Button loading state
<Button
  isLoading={isPending}
  accessibilityLabel={isPending ? "Submitting..." : "Submit"}
  accessibilityState={{ busy: isPending }}
>
  <ButtonText>Submit</ButtonText>
</Button>
```

### Images

Provide alt text for images:

```tsx
// ✅ Good - Descriptive alt text
<Image
  source={{ uri: product.imageUrl }}
  accessibilityLabel={`Photo of ${product.name}`}
  alt={`Photo of ${product.name}`}
/>

// ✅ Good - Decorative images
<Image
  source={decorativePattern}
  accessibilityLabel=""
  accessible={false}
/>

// ❌ Avoid - Missing alt text
<Image source={{ uri: imageUrl }} />
```

### Error Handling

Announce errors to screen readers:

```tsx
// ✅ Good - Error announcement
<View accessibilityLiveRegion="assertive">
  {error && (
    <Alert status="error" accessibilityRole="alert">
      <AlertText>{error.message}</AlertText>
    </Alert>
  )}
</View>
```

### Skip Links (Web)

Provide skip navigation links:

```tsx
// ✅ Good - Skip link (Web)
<a
  href="#main-content"
  className="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-white p-2"
>
  Skip to main content
</a>

<main id="main-content" tabIndex={-1}>
  {/* Main content */}
</main>
```

### Testing Accessibility

Test with accessibility tools:

```bash
# Run ESLint with jsx-a11y plugin
pnpm --filter web lint

# Manual testing:
# - Test with VoiceOver (iOS) or TalkBack (Android)
# - Test with keyboard navigation (web)
# - Use contrast checkers
```

## Exceptions

- Decorative elements (provide empty alt)
- Complex visualizations (provide text alternative)
- Third-party embedded content
